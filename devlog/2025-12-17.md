# Devlog 2025-12-17

## Summary
- Built a PDP-8 emulator core with an interactive monitor, octal loader/saver, and memory/register controls.
- Added TC08 two-reel support with attach/show commands, plus block read/write for 129-word frames.
- Added console device entries (TTI/TTO) to device listing and a Linux publish shortcut.
- Switched to device-first commands (dt0/dt1/lpt/watchdog) and added trace/run behavior tweaks.
- Implemented a line printer device (060) that writes IOT output to a file.

## Monitor Commands Added/Updated
- `dep <addr> <word|string>...` supports octal words and ASCII strings with escapes.
- `save <file>` writes core memory as `<addr>: <word0> ... <word7>` lines.
- `load <file>` accepts `<addr>:` line prefixes (and still accepts `@addr`).
- `dt0|dt1 att <file> [new]` attaches or creates DECtape images (device-first; legacy `att ...` removed).
- `dt0|dt1 read <block> <addr>` reads one 129-word block to memory.
- `dt0|dt1 write <block> <addr>` writes one 129-word block from memory (checksum word forced to 0).
- `lpt att <file>` attaches the line printer output file; LPT IOTs (060) write characters there.
- `watchdog restart` placeholder command for future device.
- `show dev` shows device numbers and attachment state (TTI/TTO/TC08/LPT).
- `show dt` shows TC08 drive status.
- `step [count]` executes instructions and prints registers once.
- `run [max]` clears HLT before running up to `max` (default 100000) instructions.
- `trace [count]` clears HLT, steps instructions, and prints registers after each step.

## Files Touched
- `OlivePetrel.csproj` (target framework bumped to net9.0)
- `Pdp8.cs` (loader parsing updated for `<addr>:` format; LPT IOT handling; halt clearing)
- `Program.cs` (monitor commands, help text, device listing, device-first router, trace/run tweaks)
- `Tc08.cs` (attach/create and block I/O)
- `LinePrinter.cs` (new line printer device)
- `build-linux.ps1` (publish shortcut)

## Notes
- Tape image format: octal block numbers starting at 0; blocks are 128 data words + 1 checksum word.
- Example tape file created with DECtape tool: `media/fish0.tu56`.
